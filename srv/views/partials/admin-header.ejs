<!-- Admin Header -->
<header class="py-3 px-4 border-bottom bg-medical-gradient d-flex justify-content-between align-items-center shadow-sm">
    <div class="d-flex align-items-center">
        <button class="btn btn-link text-white p-0 me-3" id="sidebarToggle" title="Toggle Sidebar">
            <i class="bi bi-list fs-4"></i>
        </button>
        <h4 class="mb-0 fw-bold text-white">
            <%= title || 'Dashboard' %>
        </h4>
    </div>
    <div class="d-flex align-items-center gap-3">
        <!-- Header Actions (Future Usage) -->
    </div>
</header>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const sidebar = document.getElementById('adminSidebar');
        const toggleBtn = document.getElementById('sidebarToggle');

        // Create overlay element
        const overlay = document.createElement('div');
        overlay.className = 'sidebar-overlay';
        document.body.appendChild(overlay);

        // Check localStorage state for desktop
        if (window.innerWidth >= 992) {
            const isCollapsed = localStorage.getItem('adminSidebarCollapsed') === 'true';
            if (isCollapsed) {
                sidebar.classList.add('collapsed');
            }
        }

        function toggleSidebar() {
            if (window.innerWidth < 992) {
                // Mobile behavior
                sidebar.classList.toggle('mobile-show');
                overlay.classList.toggle('show');
            } else {
                // Desktop behavior
                sidebar.classList.toggle('collapsed');
                const isCollapsed = sidebar.classList.contains('collapsed');
                localStorage.setItem('adminSidebarCollapsed', isCollapsed);
            }
        }

        function closeMobileSidebar() {
            if (window.innerWidth < 992) {
                sidebar.classList.remove('mobile-show');
                overlay.classList.remove('show');
            }
        }

        // Toggle button click
        toggleBtn.addEventListener('click', function (e) {
            e.stopPropagation();
            toggleSidebar();
        });

        // Close when clicking overlay
        overlay.addEventListener('click', closeMobileSidebar);

        // Close when clicking a link on mobile
        sidebar.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 992) {
                    closeMobileSidebar();
                }
            });
        });

        // Handle resize
        window.addEventListener('resize', function () {
            if (window.innerWidth >= 992) {
                overlay.classList.remove('show');
                sidebar.classList.remove('mobile-show');
            }
        });
    });
</script>